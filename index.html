<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Farm Connect</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container mt-5">
    <h1 class="text-center text-success mb-4">Smart Farm Connect</h1>

    <!-- Farmer Registration Form -->
    <div class="card shadow p-4">
      <h4 class="mb-3">Farmer Crop Registration</h4>
      <form id="farmForm">
        <div class="mb-3">
          <label for="farmerName" class="form-label">Farmer Name</label>
          <input type="text" class="form-control" id="farmerName" required>
        </div>
        <div class="mb-3">
          <label for="location" class="form-label">Farm Location</label>
          <input type="text" class="form-control" id="location" required>
        </div>
        <div class="mb-3">
          <label for="cropName" class="form-label">Crop Name</label>
          <input type="text" class="form-control" id="cropName" required>
        </div>
        <div class="mb-3">
          <label for="harvestDate" class="form-label">Date of Harvest</label>
          <input type="date" class="form-control" id="harvestDate" required>
        </div>
        <div class="mb-3">
          <label for="organic" class="form-label">Is it Organic?</label>
          <select class="form-select" id="organic" required>
            <option value="">Select</option>
            <option value="Yes">Yes</option>
            <option value="No">No</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="cropImage" class="form-label">Upload Crop Image</label>
          <input type="file" class="form-control" id="cropImage" accept="image/*">
        </div>
        <button type="submit" class="btn btn-success">Submit and Generate QR</button>
      </form>
    </div>

    <!-- QR Code Display Section -->
    <div id="qrSection" class="text-center mt-5" style="display:none;">
      <h4 class="mb-3">Scan This QR to View Crop Details</h4>
      <canvas id="qrCanvas"></canvas>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
  <script>
    const form = document.getElementById('farmForm');
    const qrSection = document.getElementById('qrSection');
    const qrCanvas = document.getElementById('qrCanvas');

    form.addEventListener('submit', function(event) {
      event.preventDefault();

      const name = document.getElementById('farmerName').value;
      const location = document.getElementById('location').value;
      const crop = document.getElementById('cropName').value;
      const date = document.getElementById('harvestDate').value;
      const organic = document.getElementById('organic').value;

      const cropDetails = `Farmer: ${name}\nLocation: ${location}\nCrop: ${crop}\nHarvest: ${date}\nOrganic: ${organic}`;

      const qr = new QRious({
        element: qrCanvas,
        value: cropDetails,
        size: 200
      });

      qrSection.style.display = 'block';
    });
  </script>
</body>
</html>
